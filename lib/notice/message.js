// Generated by CoffeeScript 1.4.0
var Message, onceIfString;

onceIfString = function(fn) {
  return (function(done) {
    return function(value) {
      if (!done) {
        if (done = typeof value === 'string') {
          return fn(value);
        }
      }
    };
  })(false);
};

module.exports = Message = (function() {

  function Message(properties) {
    var composition, content, name, _fn, _i, _len, _ref,
      _this = this;
    if (properties == null) {
      properties = {};
    }
    content = {};
    composition = {
      content: ['label', 'description']
    };
    _ref = composition.content;
    _fn = function(name) {
      return Object.defineProperty(_this, name, {
        get: function() {
          return content[name] || '';
        },
        set: onceIfString(function(value) {
          return content[name] = value;
        })
      });
    };
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      name = _ref[_i];
      _fn(name);
      this[name] = properties[name];
    }
    Object.defineProperty(this, 'content', {
      get: function() {
        var result, _j, _len1, _ref1;
        result = {};
        _ref1 = composition.content;
        for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
          name = _ref1[_j];
          result[name] = content[name];
        }
        return result;
      }
    });
  }

  return Message;

})();
