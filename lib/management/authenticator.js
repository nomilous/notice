// Generated by CoffeeScript 1.6.3
module.exports.authenticator = function(config) {
  var authenticateFn;
  if (config == null) {
    config = {};
  }
  authenticateFn = (function() {
    try {
      return config.manager.authenticate;
    } catch (_error) {}
  })();
  return function(requestHandler) {
    return function(request, response) {
      var authorization;
      try {
        authorization = request.headers.authorization;
      } catch (_error) {}
      if (authorization == null) {
        response.writeHead(401, {
          'www-authenticate': 'BASIC'
        });
        return response.end();
      }
      authenticateFn();
      return requestHandler(request, response);
    };
  };
};
